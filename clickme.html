<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kejutan Untuk Iffahsyahmina! 💖</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General Body Styles */
        body {
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
            overflow-x: hidden; /* Pastikan tiada scroll horizontal */
            overflow-y: auto;   /* BENARKAN SCROLL MENURUN */
            background: linear-gradient(to right top, #ffccff, #ccccff); /* Default background */
            color: #333;
            animation: fadeIn 1.5s ease-out;
        }

        /* Container for each page (section) */
        .page-section {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            padding: 40px;
            max-width: 900px;
            width: 90%;
            text-align: center;
            margin: 20px auto;
            display: none;
            position: relative; /* Untuk confetti dan overflow */
            overflow: auto; /* BENARKAN SCROLL DALAM PAGE INI */
            z-index: 1; /* Pastikan page content di atas confetti */
            max-height: 95vh; /* Pastikan page ada limit tinggi supaya boleh scroll */
        }
        .page-section.active {
            display: block;
        }

        /* Page Specific Backgrounds - LEBIH MERIAH */
        body.bg-page1 { background: linear-gradient(to bottom, #ffdab9, #ffc0cb); /* Peach ke Pink Muda */ }
        body.bg-page2 { 
            background: linear-gradient(to right, #ff99cc, #cc99ff); /* Pink terang ke Ungu */
            position: relative;
            overflow: hidden; /* Penting untuk confetti */
        }
        body.bg-page3 { background: linear-gradient(to top, #ffe0e0, #a8dadc); /* Light Pink ke Mint Blue */ }

        /* Confetti Overlay for Page 2 */
        .confetti-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0; /* Pastikan di belakang konten */
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #ffccff; /* Default confetti color */
            border-radius: 50%;
            opacity: 0;
            animation: confetti-fall 3s ease-out forwards;
            z-index: 0;
        }
        /* Confetti Keyframes */
        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            100% { transform: translateY(calc(100vh + 100px)) rotate(720deg); opacity: 0.8); }
        }

        /* Header Styles */
        .header h1 {
            font-family: 'Pacifico', cursive;
            color: #e91e63;
            font-size: 3.5em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .header h2 {
            font-family: 'Pacifico', cursive;
            color: #c2185b;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .intro-message {
            font-size: 1.2em;
            color: #555;
            margin-bottom: 30px;
        }

        /* Button Styles */
        .btn {
            background-color: #e91e63;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 30px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            margin-top: 20px;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }
        .btn:hover {
            background-color: #c2185b;
            transform: translateY(-3px);
        }
        .btn:active {
            transform: translateY(1px);
        }

        /* Date Input Styles (Page 1) */
        #currentDateInput {
            padding: 10px 15px;
            font-size: 1.1em;
            border: 2px solid #ff69b4;
            border-radius: 10px;
            text-align: center;
            color: #e91e63;
            width: 200px;
            background-color: #fff;
            cursor: default;
            margin-bottom: 30px;
        }

        /* --- Page 2 Section Specific Styles --- */
        .page2-content {
            display: flex;
            flex-direction: column; /* Atur elemen dalam kolum */
            align-items: center;
            text-align: center;
            z-index: 1; /* Pastikan konten di atas confetti */
            position: relative; /* Penting untuk z-index */
        }
        .image-wrapper {
            position: relative;
            padding: 10px;
            box-sizing: border-box;
            margin-bottom: 20px; /* Jarak antara gambar dan teks di bawahnya */
        }
        .iffahsyahmina-img {
            width: 100%;
            max-width: 300px; /* Kecilkan lagi lebar maksimum */
            max-height: 400px; /* Tambah tinggi maksimum */
            height: auto;
            object-fit: cover; /* Pastikan gambar muat dalam aspect ratio tanpa herot */
            border-radius: 15px;
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .iffahsyahmina-img:hover {
            transform: scale(1.02);
        }
        .text-content {
            font-size: 1.1em;
            color: #444;
            text-align: center; /* Pastikan teks di tengah */
            width: 100%; /* Ambil lebar penuh */
        }
        .birthday-message {
            font-family: 'Quicksand', sans-serif;
            font-size: 1.1em;
            line-height: 1.1; /* Dikurangkan lagi untuk sangat padat */
            color: #333;
            margin: 0; /* Buang semua margin */
            padding: 0; /* Buang semua padding */
            text-align: center;
            font-weight: bold;
            display: block; /* Pastikan ia blok untuk kawalan baris */
        }
        .birthday-message .pink-heart {
            color: #ff69b4;
            font-size: 1.1em;
            margin: 0 3px; /* Kurangkan margin untuk hearts */
        }
        .birthday-message br {
            margin-bottom: 0; /* Pastikan tiada margin di BR */
            line-height: 0; /* Cubaan untuk kurangkan ruang baris */
        }

        .question-section {
            text-align: center;
            margin-top: 30px; /* Jarakkan dari teks birthday */
            width: 100%;
        }
        .love-question {
            font-size: 1.8em;
            font-weight: bold;
            color: #e91e63;
            margin-bottom: 20px;
        }
        .options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }
        .love-btn {
            min-width: 120px;
        }

        /* Heart Overlay Animation */
        .heart-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 0;
            height: 0;
            background-color: rgba(255, 105, 180, 0.7);
            border-radius: 50%;
            opacity: 0;
            transition: all 0.5s ease-out;
            pointer-events: none;
        }
        .heart-overlay.active {
            width: 150px;
            height: 150px;
            opacity: 1;
            animation: pulseHeart 1s infinite alternate;
        }

        @keyframes pulseHeart {
            from { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            to { transform: translate(-50%, -50%) scale(1.1); opacity: 0.8); }
        }

        /* --- Page 3 Section Specific Styles --- */
        .balloon-section {
            margin-top: 40px;
            margin-bottom: 60px;
        }
        .balloons-container {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            min-height: 200px;
            flex-wrap: wrap; /* Benarkan belon wrap ke baris baru pada skrin kecil */
        }
        .balloon-item-wrapper { /* New wrapper for balloon and its revealed image */
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px; /* Space for the image to appear below */
        }
        .balloon {
            position: relative; /* Changed from absolute to relative for normal flow */
            width: 150px;
            height: 180px;
            background-color: #ff99cc;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            cursor: pointer;
            box-shadow: inset -7px -7px 7px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, opacity 0.6s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 1.5em;
            overflow: hidden;
            animation: floatUpDown 3s infinite ease-in-out;
            z-index: 2; /* Make sure balloon is above the image when popping */
        }
        /* Unique balloon colors */
        .balloon:nth-child(1) { background-color: #ff69b4; }
        .balloon:nth-child(2) { background-color: #8a2be2; }
        .balloon:nth-child(3) { background-color: #ffd700; }

        @keyframes floatUpDown {
            0% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0); }
        }

        .balloon.popped {
            opacity: 0;
            transform: scale(0.1) translateY(-200px);
            pointer-events: none;
        }

        .revealed-image-container { /* New container for the revealed image */
            margin-top: 15px; /* Space between the vanished balloon's position and the image */
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            pointer-events: none; /* Can't click on it before it's revealed */
            position: absolute; /* Position it relative to its balloon-item-wrapper */
            top: 100%; /* Place it right below the balloon */
            left: 50%;
            transform: translateX(-50%);
            z-index: 1; /* Below the balloon but above other content */
        }
        .revealed-image-container.visible {
            opacity: 1;
            pointer-events: auto; /* Allow interaction once visible */
        }

        .revealed-image-container img {
            max-width: 180px; /* Adjust size of revealed image */
            height: auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: block; /* Ensure it's a block element for proper spacing */
        }

        .next-question-section {
            margin-top: 60px;
            border-top: 1px dashed #ccc;
            padding-top: 30px;
            margin-bottom: 40px;
        }
        .quiz-question {
            font-size: 1.8em;
            font-weight: bold;
            color: #e91e63;
            margin-bottom: 25px;
        }
        .quiz-btn {
            min-width: 150px;
        }

        .quiz-section {
            margin-top: 40px;
        }
        .quiz-item {
            background-color: #fce4ec;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        .quiz-item:last-child {
            margin-bottom: 0;
        }
        .question {
            font-size: 1.5em;
            font-weight: bold;
            color: #880e4f;
            margin-bottom: 15px;
        }
        .quiz-item input[type="text"] {
            padding: 12px 18px;
            font-size: 1.1em;
            border: 2px solid #ff69b4;
            border-radius: 8px;
            width: calc(100% - 140px);
            max-width: 250px;
            margin-right: 10px;
            box-sizing: border-box;
        }
        .check-btn {
            background-color: #6a1b9a;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .check-btn:hover {
            background-color: #4a148c;
        }
        .feedback {
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: bold;
        }
        .feedback.correct {
            color: #28a745;
        }
        .feedback.incorrect {
            color: #dc3545;
        }

        .love-reveal-btn {
            background: linear-gradient(45deg, #ff69b4, #ff007f);
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: none;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin: 20px auto 0;
        }
        .love-reveal-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        .love-icon {
            width: 50px;
            height: 50px;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Infinity Love Animation - ADJUSTED FOR NON-DISAPPEARING & DENSITY */
        .infinity-love-section {
            position: relative;
            width: 100%;
            min-height: 500px; /* Increased height for more space to fill */
            margin-top: 40px;
            border: 2px dashed #ff69b4;
            border-radius: 15px;
            overflow: hidden; /* Keep emojis within boundaries */
            display: none;
            background: linear-gradient(to bottom right, #ffe0f0, #ffc0cb); /* Soft background for emoji section */
        }
        .love-animation-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: block; /* No flexbox for this, direct positioning */
        }
        .love-emoji {
            position: absolute;
            opacity: 1; /* Always visible */
            white-space: nowrap;
            /* New animation for subtle, non-disappearing movement */
            animation: subtle-drift 8s ease-in-out infinite alternate; 
        }

        /* New Keyframes for subtle, non-disappearing drift */
        @keyframes subtle-drift {
            0% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(5px, -5px) scale(1.02); }
            50% { transform: translate(-5px, 5px) scale(0.98); }
            75% { transform: translate(3px, -3px) scale(1.01); }
            100% { transform: translate(0, 0) scale(1); }
        }

        .footer-message {
            margin-top: 50px;
            font-size: 1.5em;
            font-family: 'Pacifico', cursive;
            color: #e91e63;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            display: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .page-section {
                padding: 30px 20px;
            }
            .header h1 {
                font-size: 2.5em;
            }
            .header h2 {
                font-size: 2em;
            }
            .intro-message, .final-message, .quiz-question, .love-question {
                font-size: 1em;
            }

            /* Page 2 Section Responsive */
            .image-wrapper {
                min-width: unset;
                width: 80%;
            }
            .iffahsyahmina-img {
                max-width: 250px; /* Adjust for smaller screens */
                max-height: 350px; /* Adjust for smaller screens */
            }
            .text-content {
                margin-top: 20px;
            }
            .birthday-message {
                font-size: 1em;
            }

            /* Quiz Section Responsive */
            .quiz-item input[type="text"] {
                width: calc(100% - 100px);
                margin-bottom: 10px;
                margin-right: 0;
            }
            .check-btn {
                width: 100%;
                padding: 10px;
            }

            /* Balloon sizes */
            .balloon {
                width: 100px;
                height: 120px;
                font-size: 1.2em;
            }
            .revealed-image-container img {
                max-width: 120px; /* Adjust image size for mobile */
            }
            .balloons-container {
                gap: 20px; /* Kurangkan gap belon pada mobile */
            }
        }
    </style>
</head>
<body>

    <div id="page1" class="page-section active">
        <header class="header">
            <h1>Hai, Selamat Datang Iffahsyahmina! 👋</h1>
            <p class="intro-message">Sebelum kita mulakan pengembaraan manis ni, sila masukkan tarikh hari ini:</p>
            <input type="date" id="currentDateInput" value="2025-06-09" readonly>
            <button id="nextPage1Btn" class="btn">Teruskan</button>
        </header>
    </div>

    <div id="page2" class="page-section">
        <div class="confetti-overlay" id="confettiOverlay"></div>
        <div class="page2-content">
            <div class="image-wrapper">
                <img src="iffahsyahmina-pic.jpg" alt="Gambar Iffahsyahmina" class="iffahsyahmina-img">
                <div class="heart-overlay" id="heartOverlay"></div>
            </div>
            <div class="text-content">
                <p class="birthday-message">
                    <span class="pink-heart">💖</span> Happy Birthday, Iffah Syahmina <span class="pink-heart">💖</span><br>
                    To the girl who colours my world with laughter,<br>
                    On this special day, I just want to remind you…<br>
                    You are the reason behind my happiest moments.<br>
                    Every smile of yours is a melody my heart plays on repeat.<br>
                    You’re not just beautiful — you’re everything I never knew I needed.<br>
                    Today, I wish you joy that never ends, dreams that never fade,<br>
                    and love that never breaks. Thank you for being mine.<br>
                    Thank you for staying. And thank you, for being you.<br><br>
                    Happy Birthday, babyy. I love you. 💐🎂💗
                </p>
            </div>
            <div class="question-section">
                <p class="love-question">Do you love me? 🥺</p>
                <div class="options">
                    <button id="yesOptionP2A" class="btn love-btn">Yes</button>
                    <button id="yesOptionP2B" class="btn love-btn">Yes</button>
                </div>
            </div>
        </div>
    </div>

    <div id="page3" class="page-section">
        <header class="header">
            <h2>Ini Belon Kenangan Kita, Sayang!</h2>
            <p class="intro-message">Pecahkan setiap belon untuk imbas kembali momen manis kita berdua.</p>
        </header>

        <section class="balloon-section">
            <div class="balloons-container" id="balloonsContainerP3">
                </div>
            <p class="balloon-instruction">Klik pada belon untuk mendedahkan kenangan.</p>
        </section>

        <section class="next-question-section">
            <p class="quiz-question">Nak main teka-teki tak? 🤔</p>
            <div class="options">
                <button id="quizOptionNakP3" class="btn quiz-btn">NAK</button>
                <button id="quizOptionMahuP3" class="btn quiz-btn">MAHU</button>
            </div>
        </section>

        <section class="quiz-section">
            <header class="header">
                <h2>Jom Uji Ingatan Kita! ❤️</h2>
                <p class="intro-message">Jawab soalan-soalan ni dengan tepat ya, sayang!</p>
            </header>
            <div class="quiz-item">
                <p class="question">1. Bila first Iffah reply Syah?</p>
                <input type="text" id="q1Answer" placeholder="e.g. 27/05/2023">
                <button class="check-btn" onclick="checkAnswer('q1', '27/05/2023')">Check</button>
                <p class="feedback" id="q1Feedback"></p>
            </div>

            <div class="quiz-item">
                <p class="question">2. Bila Syah confess?</p>
                <input type="text" id="q2Answer" placeholder="e.g. 10/08/2023">
                <button class="check-btn" onclick="checkAnswer('q2', '10/08/2023')">Check</button>
                <p class="feedback" id="q2Feedback"></p>
            </div>

            <div class="quiz-item">
                <p class="question">3. How much do I love you?</p>
                <button id="showLoveBtnP3" class="btn love-reveal-btn">
                    <img src="love-button-icon.png" alt="Love Icon" class="love-icon">
                </button>
            </div>
        </section>

        <section class="infinity-love-section" id="infinityLoveSection">
            <div class="love-animation-area" id="loveAnimationArea">
                </div>
        </section>
        <footer class="footer-message" id="footerMessage">
            <p>I Love You, Iffahsyahmina! Forever & Always.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let currentPage = 1;
            const pages = [
                document.getElementById('page1'),
                document.getElementById('page2'),
                document.getElementById('page3')
            ];
            const body = document.body;
            const confettiOverlay = document.querySelector('#page2 .confetti-overlay'); 

            function showPage(pageNumber) {
                pages.forEach((page, index) => {
                    if (index + 1 === pageNumber) {
                        page.classList.add('active');
                        body.className = `bg-page${pageNumber}`;
                        if (pageNumber === 2 && confettiOverlay) {
                            startConfetti();
                        } else {
                            stopConfetti();
                        }
                    } else {
                        page.classList.remove('active');
                    }
                });
            }

            // --- Confetti Functions ---
            let confettiInterval;
            function startConfetti() {
                if (confettiOverlay && !confettiInterval) {
                    const confettiShapes = ['circle', 'square', 'diamond'];
                    const confettiColors = ['#ffccff', '#ff99cc', '#cc99ff', '#ffe0b2', '#cceeff', '#ff6f61', '#88d8b0'];

                    function createConfetti() {
                        const confetti = document.createElement('div');
                        confetti.classList.add('confetti');
                        confetti.style.left = Math.random() * 100 + '%';
                        confetti.style.width = (Math.random() * 8 + 5) + 'px';
                        confetti.style.height = confetti.style.width;
                        confetti.style.animationDuration = (Math.random() * 2 + 4) + 's';
                        confetti.style.animationDelay = (Math.random() * 0.5) + 's';
                        confetti.style.opacity = '0';

                        const randomColor = confettiColors[Math.floor(Math.random() * confettiColors.length)];
                        confetti.style.backgroundColor = randomColor;

                        const randomShape = confettiShapes[Math.floor(Math.random() * confettiShapes.length)];
                        if (randomShape === 'square') {
                            confetti.style.borderRadius = '0';
                        } else if (randomShape === 'diamond') {
                            confetti.style.borderRadius = '0';
                            confetti.style.transform = 'rotate(45deg)';
                        }
                        confettiOverlay.appendChild(confetti);
                        confetti.addEventListener('animationend', () => {
                            confetti.remove();
                        });
                    }
                    confettiInterval = setInterval(createConfetti, 50);
                }
            }

            function stopConfetti() {
                clearInterval(confettiInterval);
                confettiInterval = null;
                if (confettiOverlay) {
                    confettiOverlay.innerHTML = '';
                }
            }

            // Initial load
            showPage(currentPage);

            // --- Page 1 Functionality ---
            const nextPage1Btn = document.getElementById('nextPage1Btn');
            if (nextPage1Btn) {
                nextPage1Btn.addEventListener('click', function() {
                    currentPage = 2;
                    showPage(currentPage);
                });
            }

            // --- Page 2 Functionality ---
            const yesOptionP2A = document.getElementById('yesOptionP2A');
            const yesOptionP2B = document.getElementById('yesOptionP2B');
            const iffahsyahminaImg = document.querySelector('.iffahsyahmina-img');
            const heartOverlay = document.getElementById('heartOverlay');

            if (yesOptionP2A && yesOptionP2B) {
                function goToPage3() {
                    currentPage = 3;
                    showPage(currentPage);
                }
                yesOptionP2A.addEventListener('click', goToPage3);
                yesOptionP2B.addEventListener('click', goToPage3);
            }

            // Optional: Heart animation on image hover (Page 2)
            if (iffahsyahminaImg && heartOverlay) {
                iffahsyahminaImg.addEventListener('mouseover', () => {
                    heartOverlay.classList.add('active');
                });
                iffahsyahminaImg.addEventListener('mouseout', () => {
                    heartOverlay.classList.remove('active');
                });
            }

            // --- Page 3 Functionality (Balloon Images) ---
            const balloonsContainerP3 = document.getElementById('balloonsContainerP3');
            const quizOptionNakP3 = document.getElementById('quizOptionNakP3');
            const quizOptionMahuP3 = document.getElementById('quizOptionMahuP3');
            const showLoveBtnP3 = document.getElementById('showLoveBtnP3');
            const infinityLoveSection = document.getElementById('infinityLoveSection');
            const loveAnimationArea = document.getElementById('loveAnimationArea');
            const footerMessage = document.getElementById('footerMessage');

            // Konten Belon (Hanya Gambar)
            const balloonImagesP3 = [
                "balloon-pic-1.jpg", // Gambar pertama
                "balloon-pic-2.jpg", // Gambar kedua
                "balloon-pic-3.jpg"  // Gambar ketiga
            ];

            if (balloonsContainerP3) {
                balloonImagesP3.forEach((imageSrc, index) => {
                    // Create a wrapper for each balloon + its revealed image
                    const balloonItemWrapper = document.createElement('div');
                    balloonItemWrapper.classList.add('balloon-item-wrapper');

                    const balloon = document.createElement('div');
                    balloon.classList.add('balloon');
                    balloon.textContent = (index + 1).toString(); // Kekalkan nombor pada belon

                    const revealedImageContainer = document.createElement('div');
                    revealedImageContainer.classList.add('revealed-image-container');
                    
                    const imgElement = document.createElement('img');
                    imgElement.src = imageSrc;
                    imgElement.alt = `Kenangan ${index + 1}`;
                    revealedImageContainer.appendChild(imgElement);

                    balloonItemWrapper.appendChild(balloon);
                    balloonItemWrapper.appendChild(revealedImageContainer);
                    balloonsContainerP3.appendChild(balloonItemWrapper);

                    balloon.addEventListener('click', function() {
                        if (!balloon.classList.contains('popped')) {
                            balloon.classList.add('popped');
                            // Make the image container visible and clickable
                            revealedImageContainer.classList.add('visible');
                        }
                    });
                });
            }


            if (quizOptionNakP3 && quizOptionMahuP3) {
                function scrollToQuizSection() {
                    const quizSection = document.querySelector('.quiz-section');
                    if (quizSection) {
                        quizSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }
                quizOptionNakP3.addEventListener('click', scrollToQuizSection);
                quizOptionMahuP3.addEventListener('click', scrollToQuizSection);
            }
            
            // For the 'How much do I love you?' button on Page 3
            if (showLoveBtnP3) {
                showLoveBtnP3.addEventListener('click', function() {
                    // Show infinity love section and footer message
                    if (infinityLoveSection) {
                        infinityLoveSection.style.display = 'block';
                        // Ensure loveAnimationArea is ready to render elements
                        loveAnimationArea.innerHTML = ''; 
                    }
                    if (footerMessage) {
                        footerMessage.style.display = 'block';
                    }

                    // Hide the quiz section
                    const quizSection = document.querySelector('.quiz-section');
                    if (quizSection) {
                        quizSection.style.display = 'none';
                    }

                    // Generate a large number of emojis that stay on screen
                    const loveEmojis = ['❤️', '🧡', '💛', '💚', '💙', '💜', '💖', '💞', '💕', '😍', '🥰', '😘', '💗', '💓', '✨', '💘', '💝', '😻', '🌷', '🌸', '🌼', '☀️', '🎉', '🎊', '🎁', '🎈']; // More emojis!
                    const emojiColors = ['#ff69b4', '#ffa500', '#ffd700', '#28a745', '#007bff', '#6f42c1', '#e91e63', '#ffc0cb', '#f08080', '#00bcd4', '#ff8a80', '#c8a2c8', '#dda0dd']; // More colors!

                    const numEmojis = 250; // Generate 250 emojis for density (can adjust)

                    for (let i = 0; i < numEmojis; i++) {
                        const emoji = document.createElement('span');
                        emoji.classList.add('love-emoji');
                        emoji.textContent = loveEmojis[Math.floor(Math.random() * loveEmojis.length)];
                        emoji.style.color = emojiColors[Math.floor(Math.random() * emojiColors.length)];
                        emoji.style.fontSize = (Math.random() * 2 + 1.5) + 'em'; // Random size 1.5em to 3.5em
                        
                        // Position randomly within the animation area
                        emoji.style.left = Math.random() * 100 + '%';
                        emoji.style.top = Math.random() * 100 + '%';

                        // Randomize animation duration and delay for subtle drift
                        emoji.style.animationDuration = (Math.random() * 4 + 6) + 's'; // 6-10 seconds
                        emoji.style.animationDelay = (Math.random() * 3) + 's'; // 0-3 seconds delay
                        
                        loveAnimationArea.appendChild(emoji);
                    }

                    // Scroll to the infinity love section for better view
                    infinityLoveSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
            }

            // Function to check answers (accessible globally)
            window.checkAnswer = function(questionId, correctAnswer) {
                const inputElement = document.getElementById(`${questionId}Answer`);
                const feedbackElement = document.getElementById(`${questionId}Feedback`);
                const userAnswer = inputElement.value.trim();

                if (userAnswer === correctAnswer) {
                    feedbackElement.textContent = 'Jawapan Tepat! 🎉';
                    feedbackElement.classList.remove('incorrect');
                    feedbackElement.classList.add('correct');
                } else {
                    feedbackElement.textContent = `Cuba lagi! Jawapan betul adalah: ${correctAnswer}`;
                    feedbackElement.classList.remove('correct');
                    feedbackElement.classList.add('incorrect');
                }
            };
        });
    </script>
</body>
</html>